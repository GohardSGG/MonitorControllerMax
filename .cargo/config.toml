[alias]
xtask = "run -p xtask --"

# 使用 x86-64-v3 (AVX2) 作为目标，平衡性能和兼容性
# x86-64-v3 支持：SSE4.2 + AVX + AVX2，覆盖 2013 年后几乎所有 CPU
# 注意：不要使用 target-cpu=native，会导致 AVX-512 等高级指令在普通电脑上无法加载
[build]
rustflags = ["-C", "target-cpu=x86-64-v3", "-C", "opt-level=3"]

# Mac ARM64 (M1/M2) 保持 native（Apple Silicon 指令集统一，无兼容问题）
[target.aarch64-apple-darwin]
rustflags = ["-C", "target-cpu=native", "-C", "opt-level=3"]

# Windows x64 使用 AVX2 兼容目标
[target.x86_64-pc-windows-msvc]
rustflags = ["-C", "target-cpu=x86-64-v3", "-C", "opt-level=3"]

