## Compare 模式回顾

Compare 模式是当用户先进入一个模式（Primary/常亮），再进入另一个模式（Compare/闪烁）时触发的：

```
场景 A: Solo(Primary/常亮) + Mute(Compare/闪烁)
场景 B: Mute(Primary/常亮) + Solo(Compare/闪烁)
```

在 Compare 模式下，**通道操作优先作用于 Compare 集合**（闪烁的那个）。

---

## 需要确认的边界情况

### 情况 1: Compare 模式下的旋钮行为

**场景 A: Solo(Primary) + Mute(Compare)** - 当前操作的是 Mute 集合

|操作|你期望的行为|
|---|---|
|右转|❓ 取消该组的 Mute？还是切换到操作 Solo？|
|左转|❓ Mute 该组？|

**场景 B: Mute(Primary) + Solo(Compare)** - 当前操作的是 Solo 集合

|操作|你期望的行为|
|---|---|
|右转|❓ Solo 该组？|
|左转|❓ 取消该组的 Solo？还是切换到操作 Mute？|

---

### 情况 2: Compare 集合变空时

当 Compare 集合（闪烁的那个）变空时，是否应该：

- **选项 A**: 自动退出 Compare，回到只有 Primary 的状态
- **选项 B**: 保持 Compare 模式（集合为空但模式仍在）

---

### 情况 3: 硬件按钮 vs 组旋钮的冲突

如果用户在 Compare 模式下：

1. 用**硬件按钮**（Channel_Button）点击单个通道 → 这应该 toggle 该通道
2. 用**组旋钮**（Group_Dial）操作整组 → 这应该设置整组

这两种操作是否都应该作用于 Compare 集合？

---

### 我的建议

对于 Compare 模式下的组旋钮，我建议采用**简单一致**的逻辑：

```
Compare 模式下（无论是 Solo Compare 还是 Mute Compare）：
- 右转 = 添加到当前 Compare 集合
- 左转 = 从当前 Compare 集合移除

如果 Compare 集合变空 → 自动退出 Compare 模式
```

你觉得这个逻辑合理吗？还是有其他期望的行为？

好的，让我用具体场景来描述：

---

## 场景 1: 基础操作（已确认）

**起始状态**: 空（Idle），所有通道都正常播放

1. 你**右转 Front 旋钮** → 进入 Solo 模式，L 和 R 通道变绿（Solo），其他通道变红（被 Mute）
2. 你**再右转 Surround 旋钮** → LSS/RSS/LRS/RRS 也变绿，和 L/R 一起 Solo
3. 你**左转 Front 旋钮** → L 和 R 取消 Solo 变红，只剩 Surround 在 Solo
4. 你**左转 Surround 旋钮** → 全部取消，**自动回到 Idle**（你已确认这个行为）

---

## 场景 2: Compare 模式

**起始状态**: 你先 Solo 了 Front（L/R 绿色常亮），然后点击了 Mute 按钮进入 Compare 模式

 

此时：

- Solo 是 Primary（L/R **绿色常亮**）
- Mute 是 Compare（当前没有通道，但 Mute 按钮在**闪烁**）
- **通道操作会作用于 Mute 集合**（因为 Compare 优先）

**问题**: 这时候你**右转 Surround 旋钮**，你期望发生什么？

- **选项 A**: Surround（LSS/RSS/LRS/RRS）被加入 **Mute 集合**（红色闪烁）
- **选项 B**: 什么都不做（因为右转=Solo，但当前操作的是 Mute）
- **选项 C**: 其他？

---

## 场景 3: Compare 模式下的取消操作

**起始状态**: Solo(L/R 绿色常亮) + Mute Compare(Surround 红色闪烁)

 

**问题**: 这时候你**左转 Surround 旋钮**取消了所有 Mute，你期望：

- **选项 A**: 自动退出 Compare 模式，回到只有 Solo(L/R) 的状态
- **选项 B**: 保持 Compare 模式（Mute 集合为空但 Mute 按钮还在闪烁）

---

## 场景 4: Compare 模式下操作 Primary 集合

**起始状态**: Solo(L/R 绿色常亮) + Mute Compare(Surround 红色闪烁)

 

**问题**: 这时候你**左转 Front 旋钮**想取消 L/R 的 Solo，你期望：

- **选项 A**: 可以取消 — L/R 从 Solo 集合移除，只剩 Surround 在 Mute 闪烁
- **选项 B**: 不可以 — Compare 模式下只能操作 Compare 集合，不能动 Primary

---

你可以根据这些具体场景告诉我你期望的行为是什么？